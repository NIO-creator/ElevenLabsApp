# Gemini API Key - Required for AI chat responses
GEMINI_API_KEY=your_gemini_api_key_here

# ElevenLabs API Key - Required for text-to-speech
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here

# MongoDB Connection URI - Required for persistent memory
MONGODB_URI=mongodb://localhost:27017/elevenlabs-chat

# JWT Secret - Required for authentication
JWT_SECRET=your-secret-key-change-in-production

# Server Port
PORT=8080

# ==================== SECURITY CONFIGURATION ====================
# Set to 'production' in production environments to enable error sanitization
NODE_ENV=development

# Comma-separated list of allowed origins for CORS (required in production)
# Example: https://your-frontend.vercel.app,https://your-frontend.onrender.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# ==================== OPENAI REALTIME RELAY ====================
# OpenAI API Key - Required for Realtime API relay
OPENAI_API_KEY=your_openai_api_key_here

# Relay Server Port (WebSocket)
RELAY_PORT=8081

# ==================== DIAGNOSTIC MODE (v12.9.3) ====================
# Log level: 'info' (default, minimal) or 'debug' (verbose handshake logs)
LOG_LEVEL=info

# Enable verbose handshake diagnostics and conn_id emission to clients
# When true, server sends {"type":"diag.conn_id","conn_id":"<uuid>"} on connect
# Default: false (production-safe)
DIAG_HANDSHAKE=false

# ==================== TRANSCRIPTION (Sprint 13.0) ====================
# Enable server-side Whisper transcription
TRANSCRIPTION_ENABLED=true

# Maximum audio buffer size in bytes (default 5MB)
MAX_AUDIO_BYTES=5242880

# Maximum audio duration in seconds (default 30s)
MAX_AUDIO_SECONDS=30

# OpenAI Whisper model for transcription
TRANSCRIPTION_MODEL=whisper-1

# ==================== STT FAILOVER (Sprint 13.1) ====================
# Enable failover to ElevenLabs STT on OpenAI 429 (rate limit)
STT_FAILOVER_ON_429=true

# Enable failover on 5xx server errors (default: false)
STT_FAILOVER_ON_5XX=false

# Force 429 simulation for testing failover (deterministic test mode)
# Set to 'true' to skip OpenAI and go directly to ElevenLabs
STT_FORCE_429_TEST=false
